<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Work Calendar & Salary System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
    --orange:#FF6B4A;
    --bg:#F0F2F5;
}
*{box-sizing:border-box;font-family:Segoe UI,sans-serif}

body{
    background:#AAB2BD;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    min-height:100vh;
    margin:0;
    padding:20px;
}

/* ===== CONTAINER ===== */
.container{
    width:100%;
    max-width:1100px;
    background:#fff;
    border-radius:25px;
    display:flex;
    flex-direction:column;
    position:relative;
    overflow:hidden;
    box-shadow:0 20px 50px rgba(0,0,0,.2);
    padding:20px;
    min-height:850px; /* fixed height so calendar doesn't jump */
}

/* ===== CONTROLS ===== */
.controls{
    display:flex;
    gap:10px;
    margin-bottom:15px;
    align-items:center;
    justify-content:center;
}
button{
    padding:12px 20px;
    border-radius:12px;
    border:none;
    font-weight:600;
    cursor:pointer;
    font-size:16px;
    transition:0.2s;
}
button:hover{transform:scale(1.05);}
#monthYear{
    min-width:160px;
    text-align:center;
    font-weight:bold;
    font-size:20px;
}

/* Button colors */
.workBtn{background:#2ecc71;color:#fff;}
.halfBtn{background:#f1c40f;}
.offBtn{background:#e74c3c;color:#fff;}
.clearMonth{background:#3498db;color:#fff;}
.clearAll{background:#555;color:#fff;}
.clearDay{background:#888;color:#fff;}

/* Active highlight */
button.active{outline:4px solid var(--orange);}

/* Button groups */
.mark-buttons,.clear-buttons{
    display:flex;
    gap:10px;
    margin-bottom:15px;
    justify-content:center;
}

/* ===== CALENDAR ===== */
.calendar{
    background:#fff;
    border-radius:20px;
    padding:15px;
}
.days-header{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    text-align:center;
    font-weight:bold;
    color:var(--orange);
    font-size:16px;
}
.days{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:6px;
    height: calc(6 * 70px + 5 * 6px); /* fixed for 6 weeks */
}
.day{
    background:var(--bg);
    height:70px;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:600;
    cursor:pointer;
    transition:0.2s;
    font-size:16px;
}
.day:hover{transform:scale(1.05);}
.day.work{background:#2ecc71;color:#fff;}
.day.half{background:#f1c40f;color:#fff;}
.day.off{background:#e74c3c;color:#fff;}

/* ===== SUMMARY ===== */
.summary{
    margin-top:15px;
    background:#fff;
    border-radius:15px;
    padding:15px;
    text-align:center;
    font-size:16px;
}

/* ===== OVERLAY ===== */
.overlay{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,.3);
    display:none;
    z-index:9;
}
.overlay.show{display:block}

/* ===== CALCULATOR PANEL ===== */
.calc-panel{
    position:absolute;
    top:0;
    right:-320px;
    width:320px;
    height:100%;
    background:#fff;
    padding:15px;
    border-left:1px solid #eee;
    transition:.3s ease;
    z-index:10;
}
.calc-panel.open{right:0}

/* ===== CALC HEADER ===== */
.calc-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:10px;
}
.calc-header button{
    background:#e74c3c;
    color:#fff;
    padding:6px 10px;
}

/* SLIDE BUTTON */
.calc-slide-btn{
    position:absolute;
    top:50%;
    right:0;
    transform:translateY(-50%);
    background:var(--orange);
    color:#fff;
    padding:14px 8px;
    border-radius:10px 0 0 10px;
    cursor:pointer;
    writing-mode:vertical-rl;
    font-size:14px;
}

/* CALCULATOR */
.display{
    background:var(--bg);
    padding:15px;
    font-size:22px;
    text-align:right;
    border-radius:10px;
    margin-bottom:12px;
}
.calc-grid{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:8px;
}
.calc-grid button{height:42px;font-size:16px}
.orange{background:var(--orange);color:#fff}
.rate-input input{
    width:100%;
    margin-top:10px;
    padding:10px;
    border-radius:8px;
    border:1px solid #ccc;
}

/* Remove number input arrows */
input[type=number]::-webkit-outer-spin-button,
input[type=number]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
input[type=number] {
    -moz-appearance: textfield; /* Firefox */
}

/* ===== MOBILE ===== */
@media(max-width:768px){
    .container{border-radius:0;padding:10px;}
    .calc-panel{width:100%;right:-100%}
    .calc-panel.open{right:0}
    .calc-slide-btn{
        writing-mode:horizontal-tb;
        bottom:0;top:auto;
        right:50%;transform:translateX(50%);
        border-radius:10px 10px 0 0;
    }
    .day{height:50px;}
    button{font-size:14px;padding:10px 14px;}
}
</style>
</head>

<body>

<div class="container">

    <div class="controls">
        <button id="prevMonth">←</button>
        <span id="monthYear"></span>
        <button id="nextMonth">→</button>
    </div>

    <div class="mark-buttons">
        <button class="workBtn" onclick="setMode('work', this)">Work</button>
        <button class="halfBtn" onclick="setMode('half', this)">Half</button>
        <button class="offBtn" onclick="setMode('off', this)">Off</button>
        <button class="clearDay" onclick="setMode('clearDay', this)">Clear Day</button>
    </div>

    <div class="clear-buttons">
        <button class="clearMonth" onclick="clearMonth()">Clear Month</button>
        <button class="clearAll" onclick="clearAll()">Clear All</button>
    </div>

    <div class="calendar">
        <div class="days-header">
            <div>S</div><div>M</div><div>T</div><div>W</div><div>T</div><div>F</div><div>S</div>
        </div>
        <div class="days" id="days"></div>
    </div>

    <div class="summary">
        Work: <b id="workCount">0</b> |
        Half: <b id="halfCount">0</b> |
        Off: <b id="offCount">0</b><br><br>
        Salary: ₱ <b id="salaryTotal">0.00</b>
    </div>

</div>

<!-- OVERLAY -->
<div class="overlay" id="overlay" onclick="toggleCalc()"></div>

<!-- CALCULATOR -->
<div class="calc-panel" id="calcPanel">
    <div class="calc-header">
        <strong>Calculator</strong>
        <button onclick="toggleCalc()">✕</button>
    </div>

    <div class="display" id="display">0</div>

    <div class="calc-grid">
        <button onclick="clr()">C</button>
        <button onclick="add('/')">/</button>
        <button onclick="add('*')">×</button>
        <button onclick="del()">⌫</button>

        <button onclick="add('7')">7</button>
        <button onclick="add('8')">8</button>
        <button onclick="add('9')">9</button>
        <button onclick="add('-')">-</button>

        <button onclick="add('4')">4</button>
        <button onclick="add('5')">5</button>
        <button onclick="add('6')">6</button>
        <button onclick="add('+')">+</button>

        <button onclick="add('1')">1</button>
        <button onclick="add('2')">2</button>
        <button onclick="add('3')">3</button>
        <button class="orange" onclick="calc()">=</button>

        <button onclick="add('0')" style="grid-column:span 2">0</button>
        <button onclick="add('.')">.</button>
    </div>

    <div class="rate-input">
        <input type="number" id="rateInput" placeholder="Daily Rate ₱" min="0" step="any" oninput="computeSalary()" onkeydown="return isNumberKey(event)">
    </div>
</div>

<div class="calc-slide-btn" onclick="toggleCalc()">CALCULATOR</div>

<script>
const months=["January","February","March","April","May","June","July","August","September","October","November","December"];
let mode="work";
let marks=JSON.parse(localStorage.getItem("marks"))||{};

const daysDiv=document.getElementById("days");
const workCount=document.getElementById("workCount");
const halfCount=document.getElementById("halfCount");
const offCount=document.getElementById("offCount");
const salaryTotal=document.getElementById("salaryTotal");
const rateInput=document.getElementById("rateInput");
const monthYear=document.getElementById("monthYear");
const prevBtn=document.getElementById("prevMonth");
const nextBtn=document.getElementById("nextMonth");

let currentMonth = new Date().getMonth();
let currentYear = new Date().getFullYear();

// Update month-year display
function updateMonthYear(){
    monthYear.innerText = `${months[currentMonth]} ${currentYear}`;
    render();
}

// Navigate months
prevBtn.onclick = ()=>{
    currentMonth--;
    if(currentMonth<0){currentMonth=11; currentYear--;}
    updateMonthYear();
}
nextBtn.onclick = ()=>{
    currentMonth++;
    if(currentMonth>11){currentMonth=0; currentYear++;}
    updateMonthYear();
}

// Set mode and highlight button
function setMode(m, btn){
    mode = m;
    document.querySelectorAll('.mark-buttons button').forEach(b=>b.classList.remove('active'));
    if(btn) btn.classList.add('active');
}

// Render calendar
function render(){
    daysDiv.innerHTML="";
    let first=new Date(currentYear,currentMonth,1).getDay();
    let total=new Date(currentYear,currentMonth+1,0).getDate();

    for(let i=0;i<first;i++) daysDiv.appendChild(document.createElement("div"));

    for(let d=1; d<=total; d++){
        let div=document.createElement("div");
        div.className="day";
        div.innerText=d;
        let key=`${currentYear}-${currentMonth}-${d}`;
        if(marks[key]) div.classList.add(marks[key]);

        div.onclick=()=>{
            if(mode==='clearDay'){ delete marks[key]; }
            else { marks[key]=mode; }
            localStorage.setItem("marks",JSON.stringify(marks));
            render();computeSalary();
        };
        daysDiv.appendChild(div);
    }

    // fill remaining cells to always make 6 rows
    let remaining = 42 - (first + total);
    for(let i=0;i<remaining;i++) daysDiv.appendChild(document.createElement("div"));
}

// Compute salary
function computeSalary(){
    let rate=+rateInput.value||0,work=0,half=0,off=0,total=0;
    for(let k in marks){
        if(marks[k]=="work"){work++;total+=rate}
        if(marks[k]=="half"){half++;total+=rate/2}
        if(marks[k]=="off"){off++}
    }
    workCount.innerText=work;
    halfCount.innerText=half;
    offCount.innerText=off;
    salaryTotal.innerText=total.toFixed(2);
}

// Clear functions
function clearMonth(){
    for(let k in marks) if(k.startsWith(`${currentYear}-${currentMonth}-`)) delete marks[k];
    localStorage.setItem("marks",JSON.stringify(marks));
    render();computeSalary();
}

function clearAll(){
    if(confirm("Clear all data?")){
        marks={};
        localStorage.clear();
        render();computeSalary();
    }
}

/* Calculator */
let disp=document.getElementById("display");
function add(v){disp.innerText=disp.innerText=="0"?v:disp.innerText+v}
function clr(){disp.innerText="0"}
function del(){disp.innerText=disp.innerText.length>1?disp.innerText.slice(0,-1):"0"}
function calc(){try{disp.innerText=eval(disp.innerText)}catch{disp.innerText="Err"}}

/* Toggle calculator */
function toggleCalc(){
    document.getElementById("calcPanel").classList.toggle("open");
    document.getElementById("overlay").classList.toggle("show");
}

// Allow only numeric input for daily rate
function isNumberKey(evt) {
    let charCode = evt.which ? evt.which : evt.keyCode;
    if ([8,9,37,38,39,40,46].includes(charCode)) return true;
    if (charCode < 48 || charCode > 57) return false;
    return true;
}

updateMonthYear();
computeSalary();
</script>

</body>
</html>
