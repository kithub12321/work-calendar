<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Work Calendar & Salary System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
    --orange:#FF6B4A;
    --bg:#F4F6F8;
    --card:#FFFFFF;
    --text:#2C2C2C;
}

*{
    box-sizing:border-box;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
}

body{
    margin:0;
    background:#E1E6EB;
    display:flex;
    justify-content:center;
    padding:12px;
}

/* ===== CONTAINER ===== */
.container{
    width:100%;
    max-width:420px;
    background:var(--card);
    border-radius:24px;
    padding:16px 16px 120px; /* EXTRA bottom space for calculator */
    box-shadow:0 15px 40px rgba(0,0,0,.18);
}

/* ===== MONTH NAV ===== */
.controls{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:12px;
}

.controls button{
    width:42px;
    height:42px;
    border-radius:50%;
    border:none;
    background:var(--bg);
    font-size:20px;
    font-weight:bold;
}

#monthYear{
    font-size:18px;
    font-weight:700;
}

/* ===== BUTTONS ===== */
.mark-buttons,
.clear-buttons{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:10px;
    margin-bottom:12px;
}

button{
    border:none;
    padding:14px;
    border-radius:14px;
    font-weight:600;
    font-size:14px;
    cursor:pointer;
}

button.active{
    outline:3px solid var(--orange);
}

.workBtn{background:#2ecc71;color:#fff;}
.halfBtn{background:#f1c40f;color:#fff;}
.offBtn{background:#e74c3c;color:#fff;}
.clearDay{background:#95a5a6;color:#fff;}
.clearMonth{background:#3498db;color:#fff;}
.clearAll{background:#555;color:#fff;}

/* ===== CALENDAR ===== */
.calendar{
    background:var(--bg);
    border-radius:18px;
    padding:10px;
}

.days-header{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    text-align:center;
    font-size:13px;
    font-weight:700;
    color:var(--orange);
    margin-bottom:6px;
}

.days{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:6px;
}

.day{
    height:46px;
    border-radius:12px;
    background:#fff;
    display:flex;
    justify-content:center;
    align-items:center;
    font-weight:600;
}

.day.work{background:#2ecc71;color:#fff;}
.day.half{background:#f1c40f;color:#fff;}
.day.off{background:#e74c3c;color:#fff;}

/* ===== SALARY SUMMARY (FIXED UX) ===== */
.summary{
    margin-top:16px;
    background:linear-gradient(135deg,#FF6B4A,#FF8C6A);
    color:#fff;
    border-radius:22px;
    padding:18px;
    text-align:center;
    box-shadow:0 10px 25px rgba(0,0,0,.25);
}

.summary .counts{
    font-size:14px;
    opacity:.95;
}

#salaryTotal{
    font-size:28px;
    font-weight:800;
    margin-top:6px;
    display:block;
}

/* ===== CALCULATOR BUTTON ===== */
.calc-slide-btn{
    position:fixed;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    background:var(--orange);
    color:#fff;
    padding:14px 28px;
    border-radius:30px;
    font-weight:700;
    box-shadow:0 10px 25px rgba(0,0,0,.3);
    z-index:20;
}

/* ===== OVERLAY ===== */
.overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.45);
    display:none;
    z-index:30;
}
.overlay.show{display:block}

/* ===== CALCULATOR PANEL ===== */
.calc-panel{
    position:fixed;
    bottom:-460px;
    left:0;
    width:100%;
    background:#fff;
    border-radius:26px 26px 0 0;
    padding:16px;
    z-index:40;
    transition:.35s ease;
}

.calc-panel.open{bottom:0;}

.calc-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:10px;
    font-weight:700;
}

.calc-header button{
    background:#e74c3c;
    color:#fff;
    padding:6px 12px;
    border-radius:10px;
}

.display{
    background:var(--bg);
    padding:14px;
    border-radius:12px;
    font-size:22px;
    text-align:right;
    margin-bottom:12px;
}

.calc-grid{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:8px;
}

.calc-grid button{
    height:44px;
    border-radius:12px;
}

.orange{background:var(--orange);color:#fff;}

.rate-input input{
    margin-top:12px;
    width:100%;
    padding:12px;
    border-radius:12px;
    border:1px solid #ccc;
}
</style>
</head>

<body>

<div class="container">

    <div class="controls">
        <button id="prevMonth">←</button>
        <span id="monthYear"></span>
        <button id="nextMonth">→</button>
    </div>

    <div class="mark-buttons">
        <button class="workBtn" onclick="setMode('work',this)">Work</button>
        <button class="halfBtn" onclick="setMode('half',this)">Half</button>
        <button class="offBtn" onclick="setMode('off',this)">Off</button>
        <button class="clearDay" onclick="setMode('clearDay',this)">Clear Day</button>
    </div>

    <div class="clear-buttons">
        <button class="clearMonth" onclick="clearMonth()">Clear Month</button>
        <button class="clearAll" onclick="clearAll()">Clear All</button>
    </div>

    <div class="calendar">
        <div class="days-header">
            <div>S</div><div>M</div><div>T</div><div>W</div><div>T</div><div>F</div><div>S</div>
        </div>
        <div class="days" id="days"></div>
    </div>

    <div class="summary">
        <div class="counts">
            Work: <b id="workCount">0</b> |
            Half: <b id="halfCount">0</b> |
            Off: <b id="offCount">0</b>
        </div>
        <span id="salaryTotal">₱ 0.00</span>
    </div>

</div>

<div class="overlay" id="overlay" onclick="toggleCalc()"></div>

<div class="calc-panel" id="calcPanel">
    <div class="calc-header">
        <span>Calculator</span>
        <button onclick="toggleCalc()">✕</button>
    </div>

    <div class="display" id="display">0</div>

    <div class="calc-grid">
        <button onclick="clr()">C</button>
        <button onclick="add('/')">/</button>
        <button onclick="add('*')">×</button>
        <button onclick="del()">⌫</button>

        <button onclick="add('7')">7</button>
        <button onclick="add('8')">8</button>
        <button onclick="add('9')">9</button>
        <button onclick="add('-')">-</button>

        <button onclick="add('4')">4</button>
        <button onclick="add('5')">5</button>
        <button onclick="add('6')">6</button>
        <button onclick="add('+')">+</button>

        <button onclick="add('1')">1</button>
        <button onclick="add('2')">2</button>
        <button onclick="add('3')">3</button>
        <button class="orange" onclick="calc()">=</button>

        <button onclick="add('0')" style="grid-column:span 2">0</button>
        <button onclick="add('.')">.</button>
    </div>

    <div class="rate-input">
        <input type="number" id="rateInput" placeholder="Daily Rate ₱" oninput="computeSalary()">
    </div>
</div>

<div class="calc-slide-btn" onclick="toggleCalc()">CALCULATOR</div>

<script>
const months=["January","February","March","April","May","June","July","August","September","October","November","December"];
let currentMonth=new Date().getMonth();
let currentYear=new Date().getFullYear();
let mode="work";
let marks=JSON.parse(localStorage.getItem("marks"))||{};

const daysDiv=document.getElementById("days");
const workCount=document.getElementById("workCount");
const halfCount=document.getElementById("halfCount");
const offCount=document.getElementById("offCount");
const salaryTotal=document.getElementById("salaryTotal");
const rateInput=document.getElementById("rateInput");

document.getElementById("prevMonth").onclick=()=>{currentMonth--;if(currentMonth<0){currentMonth=11;currentYear--;}render();}
document.getElementById("nextMonth").onclick=()=>{currentMonth++;if(currentMonth>11){currentMonth=0;currentYear++;}render();}

function setMode(m,btn){
    mode=m;
    document.querySelectorAll(".mark-buttons button").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
}

function render(){
    document.getElementById("monthYear").innerText=`${months[currentMonth]} ${currentYear}`;
    daysDiv.innerHTML="";
    let first=new Date(currentYear,currentMonth,1).getDay();
    let total=new Date(currentYear,currentMonth+1,0).getDate();

    for(let i=0;i<first;i++)daysDiv.appendChild(document.createElement("div"));

    for(let d=1;d<=total;d++){
        let div=document.createElement("div");
        div.className="day";
        div.innerText=d;
        let key=`${currentYear}-${currentMonth}-${d}`;
        if(marks[key])div.classList.add(marks[key]);
        div.onclick=()=>{
            if(mode==="clearDay")delete marks[key];
            else marks[key]=mode;
            localStorage.setItem("marks",JSON.stringify(marks));
            render();computeSalary();
        }
        daysDiv.appendChild(div);
    }
}

function computeSalary(){
    let rate=+rateInput.value||0,w=0,h=0,o=0,total=0;
    for(let k in marks){
        if(marks[k]=="work"){w++;total+=rate}
        if(marks[k]=="half"){h++;total+=rate/2}
        if(marks[k]=="off"){o++}
    }
    workCount.innerText=w;
    halfCount.innerText=h;
    offCount.innerText=o;
    salaryTotal.innerText=`₱ ${total.toFixed(2)}`;
}

function clearMonth(){
    for(let k in marks)if(k.startsWith(`${currentYear}-${currentMonth}-`))delete marks[k];
    localStorage.setItem("marks",JSON.stringify(marks));
    render();computeSalary();
}

function clearAll(){
    if(confirm("Clear all data?")){
        marks={};localStorage.clear();
        render();computeSalary();
    }
}

let disp=document.getElementById("display");
function add(v){disp.innerText=disp.innerText=="0"?v:disp.innerText+v}
function clr(){disp.innerText="0"}
function del(){disp.innerText=disp.innerText.length>1?disp.innerText.slice(0,-1):"0"}
function calc(){try{disp.innerText=eval(disp.innerText)}catch{disp.innerText="Err"}}

function toggleCalc(){
    document.getElementById("calcPanel").classList.toggle("open");
    document.getElementById("overlay").classList.toggle("show");
}

render();computeSalary();
</script>

</body>
</html>
